@page "/ship/storedships"
@using dashboard_elite.Helpers
@inherits PageBase
@layout PageLayout

@{
    var storedShips = Ships.ShipsList.Where(x => x.Stored)
        .OrderBy(x => x.Distance).ThenBy(x => x.ShipType).ToList();

}

<MudSimpleTable Hover="false" Dense="true" FixedHeader="false" Class="PageTable large-font flex-grow-1 flex-shrink-1" Style="min-height: 0;">
    <tbody>
    
        @if (storedShips.Count == 0)
        {
            <div class="cardcaption data">NO STORED SHIPS</div>
        }

        @foreach (var m in storedShips)
        {
            <table>
                <tbody>
                    @if (!string.IsNullOrEmpty(m.Name))
                    {
                        <tr>
                            <td class="caption">Ship Name</td>
                            <td class="data">@m.Name</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.ShipTypeFull))
                    {
                        <tr>
                            <td class="caption">Ship Type</td>
                            <td class="data">@m.ShipTypeFull (@m.ShipID)</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.StarSystem))
                    {
                        <tr>
                            <td class="caption">In System</td>
                            <td class="data">@m.StarSystem</td>
                        </tr>
                    }
                    @if (m.Distance > 0)
                    {
                        <tr>
                            <td class="caption">Distance</td>
                            <td class="data">@m.Distance.ToString("N0") Ly</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.StationName))
                    {
                        <tr>
                            <td class="caption">On Station</td>
                            <td class="data">@m.StationName</td>
                        </tr>
                    }
                    @if (m.HullValue + m.ModulesValue > 0)
                    {
                        <tr>
                            <td class="caption">Value</td>
                            <td class="data">@((m.HullValue + m.ModulesValue).ToString("N0")) CR</td>
                        </tr>
                    }
                    @if (m.Rebuy > 0)
                    {
                        <tr>
                            <td class="caption">Rebuy</td>
                            <td class="data">@m.Rebuy.ToString("N0") CR</td>
                        </tr>
                    }
                    @if (m.Hot)
                    {
                        <tr>
                            <td class="caption">Hot</td>
                            <td class="data alarm">YES</td>
                        </tr>
                    }
                    @if (m.HullHealth > 0 && m.HullHealth < 100)
                    {
                        <tr>
                            <td class="caption">Hull Health</td>
                            <td class="data alarm">@m.HullHealth.ToString("N0") %</td>
                        </tr>
                    }
                    @if (m.FuelCapacity > 0)
                    {
                        <tr>
                            <td class="caption">Fuel Capacity</td>
                            <td class="data">@m.FuelCapacity.ToString("N0") T</td>
                        </tr>
                    }
                    @if (m.CargoCapacity > 0)
                    {
                        <tr>
                            <td class="caption">Cargo Capacity</td>
                            <td class="data">@m.CargoCapacity T</td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td class="caption">Cargo Capacity</td>
                            <td class="data">NONE</td>
                        </tr>
                    }

                    @if (m.UnladenMass > 0)
                    {
                        <tr>
                            <td class="caption">Unladen Mass</td>
                            <td class="data">@m.UnladenMass.ToString("N1") T</td>
                        </tr>
                    }
                    @if (m.MaxJumpRange > 0)
                    {
                        <tr>
                            <td class="caption">Max. Jump Range</td>
                            <td class="data">@m.MaxJumpRange.ToString("N1") LY</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.Bulkhead))
                    {
                        <tr>
                            <td class="caption">Bulkhead</td>
                            <td class="data">@m.Bulkhead</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.PowerPlant))
                    {
                        <tr>
                            <td class="caption">Powerplant</td>
                            <td class="data">@m.PowerPlant</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.Engine))
                    {
                        <tr>
                            <td class="caption">Thrusters</td>
                            <td class="data">@m.Engine</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.PowerDistributor))
                    {
                        <tr>
                            <td class="caption">Power Distributor</td>
                            <td class="data">@m.PowerDistributor</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.ShieldGenerator))
                    {
                        <tr>
                            <td class="caption">Shield Generator</td>
                            <td class="data">@m.ShieldGenerator</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.FrameShiftDrive))
                    {
                        <tr>
                            <td class="caption">FSD</td>
                            <td class="data">@m.FrameShiftDrive@m.GuardianFSDBooster</td>
                        </tr>
                    }
                    @if (!string.IsNullOrEmpty(m.Cabins))
                    {
                        <tr>
                            <td class="caption">Cabins</td>
                            <td class="data">@m.Cabins</td>
                        </tr>
                    }
                    @foreach (var ml in m.ModuleList)
                    {
                        if (ml.Value.Any())
                        {
                            <tr>
                                <td class="caption">@((MarkupString)ml.Key)</td>
                                <td class="data">@((MarkupString)Module.GetModulePlacement(ml.Key, ml.Value))</td>
                            </tr>
                        }
                    }

                </tbody>
            </table>

        }    


    </tbody>
</MudSimpleTable>
